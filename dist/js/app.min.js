!function t(e,i,a){function n(s,o){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return n(i?i:t)},c,c.exports,t,e,i,a)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();i.CookieFactory=function(){function t(e){a(this,t),this.nameSpace=e}return n(t,[{key:"saveCookie",value:function(t,e){document.cookie=this.nameSpace+"-"+t+"="+e+"; path=/"}},{key:"saveJSON",value:function(t,e){this.saveCookie(t,JSON.stringify(e))}},{key:"loadCookie",value:function(t){t=this.nameSpace+"-"+t+"=";for(var e=document.cookie.split(";"),i=0;i<e.length;i++){for(var a=e[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}}},{key:"loadJSON",value:function(t){var e=this.loadCookie(t);return"undefined"==typeof e?{}:JSON.parse(e)}},{key:"loadNumber",value:function(t,e){var i=this.loadCookie(t);return"undefined"==typeof i?e:Number(i)}},{key:"loadBoolean",value:function(t,e){var i=this.loadCookie(t);return"undefined"==typeof i?e:"true"==i}}]),t}()},{}],2:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();i.Product=function(){function t(e,i){a(this,t),this.quantityChangedCallback=i,this.shippingOptions={},this.quantity=0,this.total=0,this.id=e.dataset.id,this.cost=e.dataset.cost,this.weight=e.dataset.weight;for(var n=e.getElementsByClassName("easy_products-shipping_option"),r=0;r<n.length;r++){var s=n[r],o=s.dataset.region_id,u=o?o:"default";this.shippingOptions[u]={primary_rate:Number(s.dataset.primary_rate),add_on_rate:Number(s.dataset.add_on_rate)}}this.quantityInput=e.querySelector(".easy_products-quantity_input"),this.totalDisplay=e.querySelector(".easy_products-product_total_display"),this.productTotal=e.querySelector(".easy_products-product_total"),this.quantityInput.addEventListener("change",this.quantityChanged.bind(this))}return n(t,[{key:"setQuantity",value:function(t){this.quantity=t,this.total=t*this.cost,this.quantity!=this.quantityInput.value&&(this.quantityInput.value=this.quantity),this.total>0?(this.productTotal.innerHTML=this.total.toFixed(2),this.totalDisplay.style.display=""):this.totalDisplay.style.display="none"}},{key:"quantityChanged",value:function(){var t=Number(this.quantityInput.value);isNaN(t)&&(t=0),this.setQuantity(t),"function"==typeof this.quantityChangedCallback&&this.quantityChangedCallback(this)}},{key:"retrieveShippingRates",value:function(t){var e=this.shippingOptions[t];return e?e:this.shippingOptions.default}}],[{key:"compareWeights",value:function(t,e){return t.weight<e.weight?-1:t.weight>e.weight?1:0}}]),t}()},{}],3:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();i.ShippingField=function(){function t(e,i,n,r){a(this,t),this.field=e,this.changeCallback=i,this.cookieFactory=n,this.cookieKey=r,this.valueEntered=!1,this.required=this.field.hasAttribute("required"),this.blankValue=this.field.dataset.blank_value;var s=this.cookieFactory.loadCookie(this.cookieKey);s&&(this.field.value=s,this.checkInputValue()),this.field.addEventListener("change",this.verifyInputValue.bind(this))}return n(t,[{key:"checkInputValue",value:function(){this.valueEntered=!1,this.field.value&&(this.blankValue?this.valueEntered=this.blankValue!=this.field.value:this.valueEntered=!0)}},{key:"verifyInputValue",value:function(){this.checkInputValue(),this.valueEntered&&(this.cookieFactory.saveCookie(this.cookieKey,this.field.value),this.changeCallback())}},{key:"checkIfComplete",value:function(){return!this.required||this.valueEntered}}]),t}()},{}],4:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.ShippingManager=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=t("./ShippingField");i.ShippingManager=function(){function t(e,i,n){a(this,t),t.NAME_COOKIE="name",t.ADDRESS_1_COOKIE="address_1",t.ADDRESS_2_COOKIE="address_2",t.CITY_COOKIE="city",t.POSTAL_CODE_COOKIE="postal_code",t.STATE_COOKIE="state",t.COUNTRY_COOKIE="country";var s=e.querySelector("#easy_products-name"),o=e.querySelector("#easy_products-address_1"),u=e.querySelector("#easy_products-address_2"),l=e.querySelector("#easy_products-city"),c=e.querySelector("#easy_products-postal_code"),h=e.querySelector("#easy_products-state"),d=e.querySelector("#easy_products-country");this.nameField=new r.ShippingField(s,i,n,t.NAME_COOKIE),this.address1Field=new r.ShippingField(o,i,n,t.ADDRESS_1_COOKIE),this.address2Field=new r.ShippingField(u,i,n,t.ADDRESS_2_COOKIE),this.cityField=new r.ShippingField(l,i,n,t.CITY_COOKIE),this.postalCodeField=new r.ShippingField(c,i,n,t.POSTAL_CODE_COOKIE),this.stateField=new r.ShippingField(h,i,n,t.STATE_COOKIE),this.countryField=new r.ShippingField(d,i,n,t.COUNTRY_COOKIE)}return n(t,[{key:"checkIfShippingComplete",value:function(){return this.nameField.checkIfComplete()&&this.address1Field.checkIfComplete()&&this.address2Field.checkIfComplete()&&this.cityField.checkIfComplete()&&this.postalCodeField.checkIfComplete()&&this.stateField.checkIfComplete()&&this.countryField.checkIfComplete()}},{key:"bundleAddress",value:function(){var t=this.countryField.field.options[this.countryField.field.selectedIndex];return{name:this.nameField.field.value,addressLine1:this.address1Field.field.value,addressLine2:this.address2Field.field.value,city:this.cityField.field.value,postalCode:this.postalCodeField.field.value,state:this.stateField.field.value,country:{id:t.value,name:t.text}}}},{key:"getRegionId",value:function(){return this.countryField.checkIfComplete()?this.countryField.field.value:void 0}}]),t}()},{"./ShippingField":3}],5:[function(require,module,exports){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShoppingCart=void 0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),_Product=require("./Product"),_CookieFactory=require("./CookieFactory"),_ShippingManager=require("./ShippingManager"),ShoppingCart=exports.ShoppingCart=function(){function ShoppingCart(t){_classCallCheck(this,ShoppingCart),ShoppingCart.PRODUCTS_COOKIE="product_quantities",this.productsForm=t,this.subtotalDisplay=this.productsForm.querySelector("#easy_products-subtotal"),this.shippingDisplay=this.productsForm.querySelector("#easy_products-shipping_total"),this.totalDisplay=this.productsForm.querySelector("#easy_products-total"),this.submitButton=this.productsForm.querySelector("#easy_products-submit"),this.cookieFactory=new _CookieFactory.CookieFactory("easy_products"),this.productQuantities=this.cookieFactory.loadJSON(ShoppingCart.PRODUCTS_COOKIE);for(var e=[],i=this.productsForm.getElementsByClassName("easy_products-product"),a=0;a<i.length;a++){var n=new _Product.Product(i[a],this.quantityChanged.bind(this)),r=this.productQuantities[n.id];"number"!=typeof r&&(r=0),n.setQuantity(r),e.push(n)}this.products=e.sort(_Product.Product.compareWeights).reverse(),this.shippingManager=new _ShippingManager.ShippingManager(this.productsForm,this.checkShippingAddress.bind(this),this.cookieFactory),this.calculateTotals(),"complete"===document.readyState||"loaded"===document.readyState?this.setupSubmitCallback():document.addEventListener("DOMContentLoaded",this.setupSubmitCallback.bind(this))}return _createClass(ShoppingCart,[{key:"setupSubmitCallback",value:function setupSubmitCallback(){var submitCallbackName=this.productsForm.dataset.submit_callback;if(submitCallbackName){var submitCallback=eval(submitCallbackName);"function"==typeof submitCallback&&(this.submitCallback=submitCallback)}this.productsForm.addEventListener("submit",this.submitForm.bind(this))}},{key:"submitForm",value:function(t){if(this.submitCallback){t.preventDefault();for(var e=[],i=0;i<this.products.length;i++){var a=this.products[i];a.quantity&&e.push({id:a.id,quantity:a.quantity})}this.submitCallback(this.total,e,this.shippingManager.bundleAddress())}}},{key:"checkShippingAddress",value:function(){this.shippingManager.checkIfShippingComplete()?this.calculateTotals():(this.shippingDisplay.innerHTML="Please Enter Your Shipping Address",this.totalDisplay.innerHTML="Please Enter Your Shipping Address",this.submitButton.disabled=!0)}},{key:"quantityChanged",value:function(t){this.productQuantities[t.id]=t.quantity,this.cookieFactory.saveJSON(ShoppingCart.PRODUCTS_COOKIE,this.productQuantities),this.calculateTotals()}},{key:"calculateTotals",value:function(){for(var t=0,e=0;e<this.products.length;e++)t+=this.products[e].total;if(this.subtotalDisplay.innerHTML="$"+t.toFixed(2),this.shippingManager.checkIfShippingComplete()){for(var i=0,a=this.shippingManager.getRegionId(),n=0;n<this.products.length;n++){var r=this.products[n];if(r.quantity){var s=r.retrieveShippingRates(a),o=r.quantity;0==i&&(i+=s.primary_rate,o--),o&&(i+=s.add_on_rate*o)}}this.shippingDisplay.innerHTML="$"+i.toFixed(2),this.total=t+i,this.totalDisplay.innerHTML="$"+this.total.toFixed(2),this.submitButton.disabled=!1}}}]),ShoppingCart}()},{"./CookieFactory":1,"./Product":2,"./ShippingManager":4}],6:[function(t,e,i){"use strict";var a=t("./classes/ShoppingCart"),n=document.getElementById("easy_products-products_list");"undefined"!=typeof n&&new a.ShoppingCart(n)},{"./classes/ShoppingCart":5}]},{},[6]);