{"version":3,"sources":["node_modules/browser-pack/_prelude.js","assets/js/app/classes/CookieFactory.js","assets/js/app/classes/Product.js","assets/js/app/classes/ShippingField.js","assets/js/app/classes/ShippingManager.js","assets/js/app/classes/ShoppingCart.js","assets/js/app/main.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;ACAA;;;;IAIa,a,WAAA,a;;AAET;;;;;AAKA,2BAAY,SAAZ,EAAuB;AAAA;;AACnB,aAAK,SAAL,GAAiB,SAAjB;AACH;;AAED;;;;;;;;;;mCAMW,I,EAAM,K,EAAO;AACpB,qBAAS,MAAT,GAAkB,KAAK,SAAL,GAAiB,GAAjB,GAAuB,IAAvB,GAA8B,GAA9B,GAAoC,KAApC,GAA4C,UAA9D;AACH;;AAED;;;;;;;;;iCAMS,I,EAAM,K,EAAO;;AAElB,iBAAK,UAAL,CAAgB,IAAhB,EAAsB,KAAK,SAAL,CAAe,KAAf,CAAtB;AACH;;AAED;;;;;;;;;mCAMW,I,EAAM;;AAEb,mBAAO,KAAK,SAAL,GAAiB,GAAjB,GAAuB,IAAvB,GAA8B,GAArC;AACA,gBAAI,KAAK,SAAS,MAAT,CAAgB,KAAhB,CAAsB,GAAtB,CAAT;;AAEA,iBAAK,IAAI,IAAE,CAAX,EAAc,IAAE,GAAG,MAAnB,EAA2B,GAA3B,EAAgC;;AAE5B,oBAAI,IAAI,GAAG,CAAH,CAAR;AACA,uBAAO,EAAE,MAAF,CAAS,CAAT,KAAe,GAAtB,EAA2B;AACvB,wBAAI,EAAE,SAAF,CAAY,CAAZ,CAAJ;AACH;;AAED,oBAAI,EAAE,OAAF,CAAU,IAAV,KAAmB,CAAvB,EAA0B;AACtB,2BAAO,EAAE,SAAF,CAAY,KAAK,MAAjB,EAAwB,EAAE,MAA1B,CAAP;AACH;AACJ;;AAED,mBAAO,SAAP;AACH;;AAED;;;;;;;;;iCAMS,I,EAAM;AACX,gBAAI,UAAU,KAAK,UAAL,CAAgB,IAAhB,CAAd;;AAEA,gBAAI,OAAO,OAAP,IAAkB,WAAtB,EACI,OAAO,EAAP,CADJ,KAGI,OAAO,KAAK,KAAL,CAAW,OAAX,CAAP;AACP;;AAED;;;;;;;;;;mCAOW,I,EAAM,Y,EAAc;AAC3B,gBAAI,UAAU,KAAK,UAAL,CAAgB,IAAhB,CAAd;;AAEA,gBAAI,OAAO,OAAP,IAAkB,WAAtB,EACI,OAAO,YAAP;;AAEJ,mBAAO,OAAO,OAAP,CAAP;AACH;;AAED;;;;;;;;;;oCAOa,I,EAAM,Y,EAAc;AAC7B,gBAAI,UAAU,KAAK,UAAL,CAAgB,IAAhB,CAAd;;AAEA,gBAAI,OAAO,OAAP,IAAkB,WAAtB,EACI,OAAO,YAAP;;AAEJ,mBAAO,WAAW,MAAlB;AACH;;;;;;;;;;;;;;;;;AC3GL;;;;IAIa,O,WAAA,O;;AAET;;;;;;AAMA,qBAAa,gBAAb,EAA+B,uBAA/B,EAAwD;AAAA;;AAEpD,aAAK,uBAAL,GAA+B,uBAA/B;;AAEA,aAAK,eAAL,GAAuB,EAAvB;AACA,aAAK,QAAL,GAAgB,CAAhB;AACA,aAAK,KAAL,GAAa,CAAb;;AAEA,aAAK,EAAL,GAAU,iBAAiB,OAAjB,CAAyB,IAAzB,CAAV;AACA,aAAK,IAAL,GAAY,iBAAiB,OAAjB,CAAyB,MAAzB,CAAZ;AACA,aAAK,MAAL,GAAc,iBAAiB,OAAjB,CAAyB,QAAzB,CAAd;;AAEA,YAAI,eAAe,iBAAiB,sBAAjB,CAAwC,+BAAxC,CAAnB;;AAEA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,aAAa,MAAjC,EAAyC,GAAzC,EAA8C;;AAE1C,gBAAI,cAAc,aAAa,CAAb,CAAlB;;AAEA,gBAAI,WAAW,YAAY,OAAZ,CAAoB,WAApB,CAAf;;AAEA,gBAAI,MAAM,WAAW,QAAX,GAAsB,SAAhC;;AAEA,iBAAK,eAAL,CAAqB,GAArB,IAA4B;AACxB,8BAAc,OAAO,YAAY,OAAZ,CAAoB,cAApB,CAAP,CADU;AAExB,6BAAa,OAAO,YAAY,OAAZ,CAAoB,aAApB,CAAP;AAFW,aAA5B;AAIH;;AAED,aAAK,aAAL,GAAqB,iBAAiB,aAAjB,CAA+B,+BAA/B,CAArB;AACA,aAAK,YAAL,GAAoB,iBAAiB,aAAjB,CAA+B,sCAA/B,CAApB;AACA,aAAK,YAAL,GAAoB,iBAAiB,aAAjB,CAA+B,8BAA/B,CAApB;;AAEA,aAAK,aAAL,CAAmB,gBAAnB,CAAoC,QAApC,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;AACH;;AAED;;;;;;;;;oCAKa,Q,EAAU;AACnB,iBAAK,QAAL,GAAgB,QAAhB;AACA,iBAAK,KAAL,GAAa,WAAW,KAAK,IAA7B;;AAEA,gBAAI,KAAK,QAAL,IAAiB,KAAK,aAAL,CAAmB,KAAxC,EAA+C;AAC3C,qBAAK,aAAL,CAAmB,KAAnB,GAA2B,KAAK,QAAhC;AACH;;AAED,gBAAI,KAAK,KAAL,GAAa,CAAjB,EAAoB;AAChB,qBAAK,YAAL,CAAkB,SAAlB,GAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,CAAnB,CAA9B;AACA,qBAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,EAAlC;AACH,aAHD,MAIK;AACD,qBAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,MAAlC;AACH;AACJ;;AAED;;;;;;0CAGmB;;AAEf,gBAAI,WAAW,OAAO,KAAK,aAAL,CAAmB,KAA1B,CAAf;;AAEA,gBAAI,MAAM,QAAN,CAAJ,EAAqB;AACjB,2BAAW,CAAX;AACH;;AAED,iBAAK,WAAL,CAAiB,QAAjB;;AAEA,gBAAI,OAAO,KAAK,uBAAZ,IAAuC,UAA3C,EAAuD;AACnD,qBAAK,uBAAL,CAA6B,IAA7B;AACH;AACJ;;AAED;;;;;;;;;8CAMuB,Q,EAAU;AAC7B,gBAAI,QAAQ,KAAK,eAAL,CAAqB,QAArB,CAAZ;;AAEA,mBAAO,QAAQ,KAAR,GAAgB,KAAK,eAAL,CAAqB,SAArB,CAAvB;AACH;;AAED;;;;;;;;;;uCAOuB,C,EAAG,C,EAAG;AACzB,gBAAI,EAAE,MAAF,GAAW,EAAE,MAAjB,EAAyB;AACrB,uBAAO,CAAC,CAAR;AACH;AACD,gBAAI,EAAE,MAAF,GAAW,EAAE,MAAjB,EAAyB;AACrB,uBAAO,CAAP;AACH;AACD,mBAAO,CAAP;AACH;;;;;;;;;;;;;;;;;AClHL;;;;IAIa,a,WAAA,a;;AAET;;;;;;;;AAQA,2BAAa,KAAb,EAAoB,cAApB,EAAoC,aAApC,EAAmD,SAAnD,EAA8D;AAAA;;AAE1D,aAAK,KAAL,GAAa,KAAb;AACA,aAAK,cAAL,GAAsB,cAAtB;AACA,aAAK,aAAL,GAAqB,aAArB;AACA,aAAK,SAAL,GAAiB,SAAjB;;AAEA,aAAK,YAAL,GAAoB,KAApB;AACA,aAAK,QAAL,GAAgB,KAAK,KAAL,CAAW,YAAX,CAAwB,UAAxB,CAAhB;;AAEA,aAAK,UAAL,GAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAlB;;AAEA,YAAI,cAAc,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAAK,SAAnC,CAAlB;;AAEA,YAAI,WAAJ,EAAiB;AACb,iBAAK,KAAL,CAAW,KAAX,GAAmB,WAAnB;AACA,iBAAK,eAAL;AACH;;AAED,aAAK,KAAL,CAAW,gBAAX,CAA4B,QAA5B,EAAsC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAtC;AACH;;AAED;;;;;;;0CAGmB;;AAEf,iBAAK,YAAL,GAAoB,KAApB;;AAEA,gBAAI,KAAK,KAAL,CAAW,KAAf,EAAsB;;AAElB,oBAAI,KAAK,UAAT,EAAqB;AACjB,yBAAK,YAAL,GAAoB,KAAK,UAAL,IAAmB,KAAK,KAAL,CAAW,KAAlD;AACH,iBAFD,MAGK;AACD,yBAAK,YAAL,GAAoB,IAApB;AACH;AACJ;AACJ;;AAED;;;;;;2CAGoB;AAChB,iBAAK,eAAL;;AAEA,gBAAI,KAAK,YAAT,EAAuB;AACnB,qBAAK,aAAL,CAAmB,UAAnB,CAA8B,KAAK,SAAnC,EAA8C,KAAK,KAAL,CAAW,KAAzD;AACA,qBAAK,cAAL;AACH;AACJ;;AAED;;;;;;;;0CAKmB;;AAEf,mBAAO,KAAK,QAAL,GAAgB,KAAK,YAArB,GAAoC,IAA3C;AACH;;;;;;;;;;;;;;qjBC1EL;;;;AAIA;;;;IAEa,e,WAAA,e;;AAET;;;;;;;AAOA,6BAAa,IAAb,EAAmB,qBAAnB,EAA0C,aAA1C,EAAyD;AAAA;;AAErD,wBAAgB,WAAhB,GAA8B,MAA9B;AACA,wBAAgB,gBAAhB,GAAmC,WAAnC;AACA,wBAAgB,gBAAhB,GAAmC,WAAnC;AACA,wBAAgB,WAAhB,GAA8B,MAA9B;AACA,wBAAgB,kBAAhB,GAAqC,aAArC;AACA,wBAAgB,YAAhB,GAA+B,OAA/B;AACA,wBAAgB,cAAhB,GAAiC,SAAjC;;AAEA,YAAI,YAAY,KAAK,aAAL,CAAmB,qBAAnB,CAAhB;AACA,YAAI,gBAAgB,KAAK,aAAL,CAAmB,0BAAnB,CAApB;AACA,YAAI,gBAAgB,KAAK,aAAL,CAAmB,0BAAnB,CAApB;AACA,YAAI,YAAY,KAAK,aAAL,CAAmB,qBAAnB,CAAhB;AACA,YAAI,kBAAkB,KAAK,aAAL,CAAmB,4BAAnB,CAAtB;AACA,YAAI,aAAa,KAAK,aAAL,CAAmB,sBAAnB,CAAjB;AACA,YAAI,gBAAgB,KAAK,aAAL,CAAmB,wBAAnB,CAApB;;AAEA,aAAK,SAAL,GAAiB,iCAAkB,SAAlB,EAA6B,qBAA7B,EAAoD,aAApD,EAAmE,gBAAgB,WAAnF,CAAjB;AACA,aAAK,aAAL,GAAqB,iCAAkB,aAAlB,EAAiC,qBAAjC,EAAwD,aAAxD,EAAuE,gBAAgB,gBAAvF,CAArB;AACA,aAAK,aAAL,GAAqB,iCAAkB,aAAlB,EAAiC,qBAAjC,EAAwD,aAAxD,EAAuE,gBAAgB,gBAAvF,CAArB;AACA,aAAK,SAAL,GAAiB,iCAAkB,SAAlB,EAA6B,qBAA7B,EAAoD,aAApD,EAAmE,gBAAgB,WAAnF,CAAjB;AACA,aAAK,eAAL,GAAuB,iCAAkB,eAAlB,EAAmC,qBAAnC,EAA0D,aAA1D,EAAyE,gBAAgB,kBAAzF,CAAvB;AACA,aAAK,UAAL,GAAkB,iCAAkB,UAAlB,EAA8B,qBAA9B,EAAqD,aAArD,EAAoE,gBAAgB,YAApF,CAAlB;AACA,aAAK,YAAL,GAAoB,iCAAkB,aAAlB,EAAiC,qBAAjC,EAAwD,aAAxD,EAAuE,gBAAgB,cAAvF,CAApB;AACH;;AAED;;;;;;;;;kDAK0B;;AAEtB,mBAAO,KAAK,SAAL,CAAe,eAAf,MAAoC,KAAK,aAAL,CAAmB,eAAnB,EAApC,IACI,KAAK,aAAL,CAAmB,eAAnB,EADJ,IAC4C,KAAK,SAAL,CAAe,eAAf,EAD5C,IAEI,KAAK,eAAL,CAAqB,eAArB,EAFJ,IAE8C,KAAK,UAAL,CAAgB,eAAhB,EAF9C,IAGI,KAAK,YAAL,CAAkB,eAAlB,EAHX;AAIH;;AAED;;;;;;;;wCAKiB;;AAEb,gBAAI,iBAAiB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,KAAK,YAAL,CAAkB,KAAlB,CAAwB,aAAxD,CAArB;;AAEA,mBAAO;AACH,sBAAM,KAAK,SAAL,CAAe,KAAf,CAAqB,KADxB;AAEH,8BAAc,KAAK,aAAL,CAAmB,KAAnB,CAAyB,KAFpC;AAGH,8BAAc,KAAK,aAAL,CAAmB,KAAnB,CAAyB,KAHpC;AAIH,sBAAM,KAAK,SAAL,CAAe,KAAf,CAAqB,KAJxB;AAKH,4BAAY,KAAK,eAAL,CAAqB,KAArB,CAA2B,KALpC;AAMH,uBAAO,KAAK,UAAL,CAAgB,KAAhB,CAAsB,KAN1B;AAOH,yBAAS;AACL,wBAAI,eAAe,KADd;AAEL,0BAAM,eAAe;AAFhB;AAPN,aAAP;AAYH;;AAED;;;;;;;;sCAKe;AACX,mBAAO,KAAK,YAAL,CAAkB,eAAlB,KAAsC,KAAK,YAAL,CAAkB,KAAlB,CAAwB,KAA9D,GAAsE,SAA7E;AACH;;;;;;;;;;;;;;qjBCrFL;;;;AAIA;;AACA;;AACA;;;;IAEa,Y,WAAA,Y;;AAET;;;;;AAKA,0BAAa,YAAb,EAA2B;AAAA;;AACvB,qBAAa,eAAb,GAA+B,oBAA/B;;AAEA,aAAK,YAAL,GAAoB,YAApB;;AAEA,aAAK,eAAL,GAAuB,KAAK,YAAL,CAAkB,aAAlB,CAAgC,yBAAhC,CAAvB;AACA,aAAK,eAAL,GAAuB,KAAK,YAAL,CAAkB,aAAlB,CAAgC,+BAAhC,CAAvB;AACA,aAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,aAAlB,CAAgC,sBAAhC,CAApB;;AAEA,aAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,aAAlB,CAAgC,uBAAhC,CAApB;;AAEA,aAAK,aAAL,GAAqB,iCAAkB,eAAlB,CAArB;;AAEA,aAAK,iBAAL,GAAyB,KAAK,aAAL,CAAmB,QAAnB,CAA4B,aAAa,eAAzC,CAAzB;AACA,YAAI,mBAAmB,EAAvB;;AAEA,YAAI,oBAAoB,KAAK,YAAL,CAAkB,sBAAlB,CAAyC,uBAAzC,CAAxB;;AAEA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,kBAAkB,MAAtC,EAA8C,GAA9C,EAAmD;;AAE/C,gBAAI,UAAU,qBAAY,kBAAkB,CAAlB,CAAZ,EAAkC,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAAlC,CAAd;;AAEA,gBAAI,iBAAiB,KAAK,iBAAL,CAAuB,QAAQ,EAA/B,CAArB;;AAEA,gBAAI,OAAO,cAAP,IAAyB,QAA7B,EAAuC;AACnC,iCAAiB,CAAjB;AACH;;AAED,oBAAQ,WAAR,CAAoB,cAApB;;AAEA,6BAAiB,IAAjB,CAAsB,OAAtB;AACH;;AAED,aAAK,QAAL,GAAgB,iBAAiB,IAAjB,CAAsB,iBAAQ,cAA9B,EAA8C,OAA9C,EAAhB;;AAEA,aAAK,eAAL,GAAuB,qCAAoB,KAAK,YAAzB,EAAuC,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAAvC,EAA6E,KAAK,aAAlF,CAAvB;;AAEA,aAAK,eAAL;;AAEA,YAAI,SAAS,UAAT,KAAwB,UAAxB,IAAsC,SAAS,UAAT,KAAwB,QAAlE,EAA4E;AACxE,iBAAK,mBAAL;AACH,SAFD,MAGK;AACD,qBAAS,gBAAT,CAA0B,kBAA1B,EAA8C,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAA9C;AACH;AAEJ;;AAED;;;;;;;8CAGuB;;AAEnB,gBAAI,qBAAqB,KAAK,YAAL,CAAkB,OAAlB,CAA0B,iBAA1B,CAAzB;;AAEA,gBAAI,kBAAJ,EAAwB;AACpB,oBAAI,iBAAiB,KAAK,kBAAL,CAArB;;AAEA,oBAAI,OAAO,cAAP,IAAyB,UAA7B,EAAyC;AACrC,yBAAK,cAAL,GAAsB,cAAtB;AACH;AACJ;;AAED,iBAAK,YAAL,CAAkB,gBAAlB,CAAmC,QAAnC,EAA6C,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA7C;AACH;;AAED;;;;;;;;mCAKY,K,EAAO;AACf,gBAAI,KAAK,cAAT,EAAyB;AACrB,sBAAM,cAAN;;AAEA,oBAAI,cAAc,EAAlB;;AAEA,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;;AAE3C,wBAAI,UAAU,KAAK,QAAL,CAAc,CAAd,CAAd;;AAEA,wBAAI,QAAQ,QAAZ,EAAsB;AAClB,oCAAY,IAAZ,CAAiB;AACb,gCAAI,QAAQ,EADC;AAEb,sCAAU,QAAQ;AAFL,yBAAjB;AAIH;AACJ;;AAED,qBAAK,cAAL,CAAoB,KAAK,KAAzB,EAAgC,WAAhC,EAA6C,KAAK,eAAL,CAAqB,aAArB,EAA7C;AACH;AACJ;;AAED;;;;;;+CAGwB;;AAEpB,gBAAI,KAAK,eAAL,CAAqB,uBAArB,EAAJ,EAAoD;AAChD,qBAAK,eAAL;AACH,aAFD,MAGK;AACD,qBAAK,eAAL,CAAqB,SAArB,GAAiC,oCAAjC;AACA,qBAAK,YAAL,CAAkB,SAAlB,GAA8B,oCAA9B;;AAEA,qBAAK,YAAL,CAAkB,QAAlB,GAA6B,IAA7B;AACH;AACJ;;AAED;;;;;;;;wCAKiB,O,EAAS;AACtB,iBAAK,iBAAL,CAAuB,QAAQ,EAA/B,IAAqC,QAAQ,QAA7C;AACA,iBAAK,aAAL,CAAmB,QAAnB,CAA4B,aAAa,eAAzC,EAA0D,KAAK,iBAA/D;;AAEA,iBAAK,eAAL;AACH;;AAED;;;;;;0CAGmB;;AAEf,gBAAI,WAAW,CAAf;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC3C,4BAAW,KAAK,QAAL,CAAc,CAAd,EAAiB,KAA5B;AACH;;AAED,iBAAK,eAAL,CAAqB,SAArB,GAAiC,MAAM,SAAS,OAAT,CAAiB,CAAjB,CAAvC;;AAEA,gBAAI,KAAK,eAAL,CAAqB,uBAArB,EAAJ,EAAoD;;AAEhD,oBAAI,gBAAgB,CAApB;AACA,oBAAI,WAAW,KAAK,eAAL,CAAqB,WAArB,EAAf;;AAEA,qBAAK,IAAI,KAAI,CAAb,EAAgB,KAAI,KAAK,QAAL,CAAc,MAAlC,EAA0C,IAA1C,EAA+C;AAC3C,wBAAI,UAAU,KAAK,QAAL,CAAc,EAAd,CAAd;;AAEA,wBAAI,QAAQ,QAAZ,EAAsB;;AAElB,4BAAI,gBAAgB,QAAQ,qBAAR,CAA8B,QAA9B,CAApB;;AAEA,4BAAI,gBAAgB,QAAQ,QAA5B;;AAEA,4BAAI,iBAAiB,CAArB,EAAwB;AACpB,6CAAgB,cAAc,YAA9B;AACA;AACH;AACD,4BAAI,aAAJ,EAAmB;AACf,6CAAgB,cAAc,WAAd,GAA4B,aAA5C;AACH;AACJ;AACJ;;AAED,qBAAK,eAAL,CAAqB,SAArB,GAAiC,MAAM,cAAc,OAAd,CAAsB,CAAtB,CAAvC;;AAEA,qBAAK,KAAL,GAAa,WAAW,aAAxB;;AAEA,qBAAK,YAAL,CAAkB,SAAlB,GAA8B,MAAM,KAAK,KAAL,CAAW,OAAX,CAAmB,CAAnB,CAApC;;AAEA,qBAAK,YAAL,CAAkB,QAAlB,GAA6B,KAA7B;AACH;AACJ;;;;;;;;;AChLL;;AAEA,IAAI,eAAe,SAAS,cAAT,CAAwB,6BAAxB,CAAnB,C,CANA;;;;AAQA,IAAI,OAAO,YAAP,IAAuB,WAA3B,EAAwC;AACpC,iCAAiB,YAAjB;AACH","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Created by bryce on 2/16/17.\n */\n\nexport class CookieFactory {\n\n    /**\n     * Default constructor, requires a namespace being passed in for prefixing all data\n     *\n     * @param nameSpace\n     */\n    constructor(nameSpace) {\n        this.nameSpace = nameSpace;\n    }\n\n    /**\n     * Saves a cookie to persistent storage\n     *\n     * @param name The key of the cookie\n     * @param value The new value of the cookie\n     */\n    saveCookie(name, value) {\n        document.cookie = this.nameSpace + \"-\" + name + \"=\" + value + \"; path=/\";\n    }\n\n    /**\n     * Saves a json object as a cookie\n     *\n     * @param name The key for the cookie\n     * @param value The json object to save\n     */\n    saveJSON(name, value) {\n\n        this.saveCookie(name, JSON.stringify(value));\n    }\n\n    /**\n     * Loads a cookie out of the document cookie list\n     *\n     * @param name The name of the cookie we are loading\n     * @returns {*} the new object\n     */\n    loadCookie(name) {\n\n        name = this.nameSpace + \"-\" + name + \"=\";\n        let ca = document.cookie.split(';');\n\n        for (let i=0; i<ca.length; i++) {\n\n            let c = ca[i];\n            while (c.charAt(0) == ' ') {\n                c = c.substring(1);\n            }\n\n            if (c.indexOf(name) == 0) {\n                return c.substring(name.length,c.length);\n            }\n        }\n\n        return undefined;\n    }\n\n    /**\n     * Parses a json object from a cookie, or returns an empty JSON\n     *\n     * @param name The name of the json we are loading\n     * @returns {{}} The found object\n     */\n    loadJSON(name) {\n        let content = this.loadCookie(name);\n\n        if (typeof content == \"undefined\")\n            return {};\n        else\n            return JSON.parse(content);\n    }\n\n    /**\n     * Parses a number from a cookie\n     *\n     * @param name The cookie we are looking for\n     * @param defaultValue The default to return if the cookie was not found\n     * @returns {*}\n     */\n    loadNumber(name, defaultValue) {\n        let content = this.loadCookie(name);\n\n        if (typeof content == \"undefined\")\n            return defaultValue;\n\n        return Number(content);\n    }\n\n    /**\n     * Parses a boolean value from a cookie\n     *\n     * @param name The cookie we are looking for\n     * @param defaultValue A default to return if the value was undefined\n     * @returns {*}\n     */\n    loadBoolean (name, defaultValue) {\n        let content = this.loadCookie(name);\n\n        if (typeof content == \"undefined\")\n            return defaultValue;\n\n        return content == 'true';\n    }\n}","/**\n * Created by bryce on 2/8/17.\n */\n\nexport class Product {\n\n    /**\n     * Creates a new instance of a product\n     *\n     * @param productContainer The container that will hold all data for this product\n     * @param quantityChangedCallback\n     */\n    constructor (productContainer, quantityChangedCallback) {\n\n        this.quantityChangedCallback = quantityChangedCallback;\n\n        this.shippingOptions = {};\n        this.quantity = 0;\n        this.total = 0;\n\n        this.id = productContainer.dataset['id'];\n        this.cost = productContainer.dataset['cost'];\n        this.weight = productContainer.dataset['weight'];\n\n        let shippingDivs = productContainer.getElementsByClassName('easy_products-shipping_option');\n\n        for (let i = 0; i < shippingDivs.length; i++) {\n\n            let shippingDiv = shippingDivs[i];\n\n            let regionId = shippingDiv.dataset['region_id'];\n\n            let key = regionId ? regionId : 'default';\n\n            this.shippingOptions[key] = {\n                primary_rate: Number(shippingDiv.dataset['primary_rate']),\n                add_on_rate: Number(shippingDiv.dataset['add_on_rate'])\n            };\n        }\n\n        this.quantityInput = productContainer.querySelector('.easy_products-quantity_input');\n        this.totalDisplay = productContainer.querySelector('.easy_products-product_total_display');\n        this.productTotal = productContainer.querySelector('.easy_products-product_total');\n\n        this.quantityInput.addEventListener('change', this.quantityChanged.bind(this));\n    }\n\n    /**\n     * Sets the quantity and updates the cost variables\n     *\n     * @param quantity\n     */\n    setQuantity (quantity) {\n        this.quantity = quantity;\n        this.total = quantity * this.cost;\n\n        if (this.quantity != this.quantityInput.value) {\n            this.quantityInput.value = this.quantity;\n        }\n\n        if (this.total > 0) {\n            this.productTotal.innerHTML = this.total.toFixed(2);\n            this.totalDisplay.style.display = ''\n        }\n        else {\n            this.totalDisplay.style.display = 'none';\n        }\n    }\n\n    /**\n     * Called when quantity has changed in the input, and will recalculate the totals for this product\n     */\n    quantityChanged () {\n\n        let quantity = Number(this.quantityInput.value);\n\n        if (isNaN(quantity)) {\n            quantity = 0;\n        }\n\n        this.setQuantity(quantity);\n\n        if (typeof this.quantityChangedCallback == 'function') {\n            this.quantityChangedCallback(this);\n        }\n    }\n\n    /**\n     * retrieves the shipping rate for the specified region\n     *\n     * @param regionId\n     * @returns {*}\n     */\n    retrieveShippingRates (regionId) {\n        let rates = this.shippingOptions[regionId];\n\n        return rates ? rates : this.shippingOptions['default'];\n    }\n\n    /**\n     * Compare function for comparing weights of two products\n     *\n     * @param a Product\n     * @param b Product\n     * @returns {number}\n     */\n    static compareWeights (a, b) {\n        if (a.weight < b.weight) {\n            return -1;\n        }\n        if (a.weight > b.weight) {\n            return 1;\n        }\n        return 0;\n    }\n}","/**\n * Created by bryce on 2/16/17.\n */\n\nexport class ShippingField {\n\n    /**\n     * Default constructor for a field\n     *\n     * @param field HTMLNode\n     * @param changeCallback Function\n     * @param cookieFactory CookieFactory\n     * @param cookieKey The key for the stored cookie\n     */\n    constructor (field, changeCallback, cookieFactory, cookieKey) {\n\n        this.field = field;\n        this.changeCallback = changeCallback;\n        this.cookieFactory = cookieFactory;\n        this.cookieKey = cookieKey;\n\n        this.valueEntered = false;\n        this.required = this.field.hasAttribute('required');\n\n        this.blankValue = this.field.dataset['blank_value'];\n\n        let storedValue = this.cookieFactory.loadCookie(this.cookieKey);\n\n        if (storedValue) {\n            this.field.value = storedValue;\n            this.checkInputValue();\n        }\n\n        this.field.addEventListener('change', this.verifyInputValue.bind(this));\n    }\n\n    /**\n     * Determines if the user has entered a proper value\n     */\n    checkInputValue () {\n\n        this.valueEntered = false;\n\n        if (this.field.value) {\n\n            if (this.blankValue) {\n                this.valueEntered = this.blankValue != this.field.value;\n            }\n            else {\n                this.valueEntered = true;\n            }\n        }\n    }\n\n    /**\n     * double checks input value when it changes to verify a value was entered properly\n     */\n    verifyInputValue () {\n        this.checkInputValue();\n\n        if (this.valueEntered) {\n            this.cookieFactory.saveCookie(this.cookieKey, this.field.value);\n            this.changeCallback();\n        }\n    }\n\n    /**\n     * Checks whether or not this field is ready for submission\n     *\n     * @returns Boolean\n     */\n    checkIfComplete () {\n\n        return this.required ? this.valueEntered : true;\n    }\n}","/**\n * Created by bryce on 2/16/17.\n */\n\nimport {ShippingField} from './ShippingField';\n\nexport class ShippingManager {\n\n    /**\n     * Manages the current state of the shipping options\n     *\n     * @param form\n     * @param addressChangeCallback function\n     * @param cookieFactory CookieFactory\n     */\n    constructor (form, addressChangeCallback, cookieFactory) {\n\n        ShippingManager.NAME_COOKIE = \"name\";\n        ShippingManager.ADDRESS_1_COOKIE = \"address_1\";\n        ShippingManager.ADDRESS_2_COOKIE = \"address_2\";\n        ShippingManager.CITY_COOKIE = \"city\";\n        ShippingManager.POSTAL_CODE_COOKIE = \"postal_code\";\n        ShippingManager.STATE_COOKIE = \"state\";\n        ShippingManager.COUNTRY_COOKIE = \"country\";\n\n        let nameInput = form.querySelector(\"#easy_products-name\");\n        let address1Input = form.querySelector(\"#easy_products-address_1\");\n        let address2Input = form.querySelector(\"#easy_products-address_2\");\n        let cityInput = form.querySelector(\"#easy_products-city\");\n        let postalCodeInput = form.querySelector(\"#easy_products-postal_code\");\n        let stateInput = form.querySelector(\"#easy_products-state\");\n        let countrySelect = form.querySelector(\"#easy_products-country\");\n\n        this.nameField = new ShippingField(nameInput, addressChangeCallback, cookieFactory, ShippingManager.NAME_COOKIE);\n        this.address1Field = new ShippingField(address1Input, addressChangeCallback, cookieFactory, ShippingManager.ADDRESS_1_COOKIE);\n        this.address2Field = new ShippingField(address2Input, addressChangeCallback, cookieFactory, ShippingManager.ADDRESS_2_COOKIE);\n        this.cityField = new ShippingField(cityInput, addressChangeCallback, cookieFactory, ShippingManager.CITY_COOKIE);\n        this.postalCodeField = new ShippingField(postalCodeInput, addressChangeCallback, cookieFactory, ShippingManager.POSTAL_CODE_COOKIE);\n        this.stateField = new ShippingField(stateInput, addressChangeCallback, cookieFactory, ShippingManager.STATE_COOKIE);\n        this.countryField = new ShippingField(countrySelect, addressChangeCallback, cookieFactory, ShippingManager.COUNTRY_COOKIE);\n    }\n\n    /**\n     * Checks all fields to see if the shipping is ready to go\n     *\n     * @returns {Boolean}\n     */\n    checkIfShippingComplete() {\n\n        return this.nameField.checkIfComplete() && this.address1Field.checkIfComplete()\n                && this.address2Field.checkIfComplete() && this.cityField.checkIfComplete()\n                && this.postalCodeField.checkIfComplete() && this.stateField.checkIfComplete()\n                && this.countryField.checkIfComplete();\n    }\n\n    /**\n     * Bundles the entire address component into a JSON\n     *\n     * @returns {{name: *, addressLine1: *, addressLine2: *, city: *, postalCode: *, country: {id: *, name: *}}}\n     */\n    bundleAddress () {\n\n        let selectedOption = this.countryField.field.options[this.countryField.field.selectedIndex];\n\n        return {\n            name: this.nameField.field.value,\n            addressLine1: this.address1Field.field.value,\n            addressLine2: this.address2Field.field.value,\n            city: this.cityField.field.value,\n            postalCode: this.postalCodeField.field.value,\n            state: this.stateField.field.value,\n            country: {\n                id: selectedOption.value,\n                name: selectedOption.text\n            }\n        }\n    }\n\n    /**\n     * Gets the selected region id or undefined if none has been found\n     *\n     * @returns Boolean|undefined\n     */\n    getRegionId () {\n        return this.countryField.checkIfComplete() ? this.countryField.field.value : undefined;\n    }\n}","/**\n * Created by bryce on 2/8/17.\n */\n\nimport {Product} from './Product';\nimport {CookieFactory} from './CookieFactory';\nimport {ShippingManager} from './ShippingManager';\n\nexport class ShoppingCart {\n\n    /**\n     * Constructor for this shopping cart instance\n     *\n     * @param productsForm the dom form\n     */\n    constructor (productsForm) {\n        ShoppingCart.PRODUCTS_COOKIE = 'product_quantities';\n\n        this.productsForm = productsForm;\n\n        this.subtotalDisplay = this.productsForm.querySelector('#easy_products-subtotal');\n        this.shippingDisplay = this.productsForm.querySelector('#easy_products-shipping_total');\n        this.totalDisplay = this.productsForm.querySelector('#easy_products-total');\n\n        this.submitButton = this.productsForm.querySelector('#easy_products-submit');\n\n        this.cookieFactory = new CookieFactory('easy_products');\n\n        this.productQuantities = this.cookieFactory.loadJSON(ShoppingCart.PRODUCTS_COOKIE);\n        let unsortedProducts = [];\n\n        let productContainers = this.productsForm.getElementsByClassName('easy_products-product');\n\n        for (let i = 0; i < productContainers.length; i++) {\n\n            let product = new Product(productContainers[i], this.quantityChanged.bind(this));\n\n            let storedQuantity = this.productQuantities[product.id];\n\n            if (typeof storedQuantity != 'number') {\n                storedQuantity = 0;\n            }\n\n            product.setQuantity(storedQuantity);\n\n            unsortedProducts.push(product);\n        }\n\n        this.products = unsortedProducts.sort(Product.compareWeights).reverse();\n\n        this.shippingManager = new ShippingManager(this.productsForm, this.checkShippingAddress.bind(this), this.cookieFactory);\n\n        this.calculateTotals();\n\n        if (document.readyState === \"complete\" || document.readyState === \"loaded\") {\n            this.setupSubmitCallback();\n        }\n        else {\n            document.addEventListener('DOMContentLoaded', this.setupSubmitCallback.bind(this));\n        }\n\n    }\n\n    /**\n     * Sets up the complete callback\n     */\n    setupSubmitCallback () {\n\n        let submitCallbackName = this.productsForm.dataset['submit_callback'];\n\n        if (submitCallbackName) {\n            let submitCallback = eval(submitCallbackName);\n\n            if (typeof submitCallback == 'function') {\n                this.submitCallback = submitCallback;\n            }\n        }\n\n        this.productsForm.addEventListener('submit', this.submitForm.bind(this));\n    }\n\n    /**\n     * Stops the submission if a complete callback is set\n     *\n     * @param event\n     */\n    submitForm (event) {\n        if (this.submitCallback) {\n            event.preventDefault();\n\n            let productData = [];\n\n            for (let i = 0; i < this.products.length; i++) {\n\n                let product = this.products[i];\n\n                if (product.quantity) {\n                    productData.push({\n                        id: product.id,\n                        quantity: product.quantity\n                    });\n                }\n            }\n\n            this.submitCallback(this.total, productData, this.shippingManager.bundleAddress());\n        }\n    }\n\n    /**\n     * checks to see if the shipping address has been changed\n     */\n    checkShippingAddress () {\n\n        if (this.shippingManager.checkIfShippingComplete()) {\n            this.calculateTotals();\n        }\n        else {\n            this.shippingDisplay.innerHTML = 'Please Enter Your Shipping Address';\n            this.totalDisplay.innerHTML = 'Please Enter Your Shipping Address';\n\n            this.submitButton.disabled = true;\n        }\n    }\n\n    /**\n     * Called whenever a quantity has changed\n     *\n     * @param product Product\n     */\n    quantityChanged (product) {\n        this.productQuantities[product.id] = product.quantity;\n        this.cookieFactory.saveJSON(ShoppingCart.PRODUCTS_COOKIE, this.productQuantities);\n\n        this.calculateTotals();\n    }\n\n    /**\n     * Recalculates all totals\n     */\n    calculateTotals () {\n\n        let subtotal = 0;\n        for (let i = 0; i < this.products.length; i++) {\n            subtotal+= this.products[i].total;\n        }\n\n        this.subtotalDisplay.innerHTML = '$' + subtotal.toFixed(2);\n\n        if (this.shippingManager.checkIfShippingComplete()) {\n\n            let shippingTotal = 0;\n            let regionId = this.shippingManager.getRegionId();\n\n            for (let i = 0; i < this.products.length; i++) {\n                let product = this.products[i];\n\n                if (product.quantity) {\n\n                    let shippingRates = product.retrieveShippingRates(regionId);\n\n                    let addOnQuantity = product.quantity;\n\n                    if (shippingTotal == 0) {\n                        shippingTotal+= shippingRates.primary_rate;\n                        addOnQuantity--;\n                    }\n                    if (addOnQuantity) {\n                        shippingTotal+= shippingRates.add_on_rate * addOnQuantity;\n                    }\n                }\n            }\n\n            this.shippingDisplay.innerHTML = '$' + shippingTotal.toFixed(2);\n\n            this.total = subtotal + shippingTotal;\n\n            this.totalDisplay.innerHTML = '$' + this.total.toFixed(2);\n\n            this.submitButton.disabled = false;\n        }\n    }\n}","/**\n * Created by bryce on 2/8/17.\n */\n\nimport {ShoppingCart} from './classes/ShoppingCart';\n\nlet productsForm = document.getElementById('easy_products-products_list');\n\nif (typeof productsForm != 'undefined') {\n    new ShoppingCart(productsForm);\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvYXBwL2NsYXNzZXMvQ29va2llRmFjdG9yeS5qcyIsImFzc2V0cy9qcy9hcHAvY2xhc3Nlcy9Qcm9kdWN0LmpzIiwiYXNzZXRzL2pzL2FwcC9jbGFzc2VzL1NoaXBwaW5nRmllbGQuanMiLCJhc3NldHMvanMvYXBwL2NsYXNzZXMvU2hpcHBpbmdNYW5hZ2VyLmpzIiwiYXNzZXRzL2pzL2FwcC9jbGFzc2VzL1Nob3BwaW5nQ2FydC5qcyIsImFzc2V0cy9qcy9hcHAvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7QUNBQTs7OztJQUlhLGEsV0FBQSxhOztBQUVUOzs7OztBQUtBLDJCQUFZLFNBQVosRUFBdUI7QUFBQTs7QUFDbkIsYUFBSyxTQUFMLEdBQWlCLFNBQWpCO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs7bUNBTVcsSSxFQUFNLEssRUFBTztBQUNwQixxQkFBUyxNQUFULEdBQWtCLEtBQUssU0FBTCxHQUFpQixHQUFqQixHQUF1QixJQUF2QixHQUE4QixHQUE5QixHQUFvQyxLQUFwQyxHQUE0QyxVQUE5RDtBQUNIOztBQUVEOzs7Ozs7Ozs7aUNBTVMsSSxFQUFNLEssRUFBTzs7QUFFbEIsaUJBQUssVUFBTCxDQUFnQixJQUFoQixFQUFzQixLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQXRCO0FBQ0g7O0FBRUQ7Ozs7Ozs7OzttQ0FNVyxJLEVBQU07O0FBRWIsbUJBQU8sS0FBSyxTQUFMLEdBQWlCLEdBQWpCLEdBQXVCLElBQXZCLEdBQThCLEdBQXJDO0FBQ0EsZ0JBQUksS0FBSyxTQUFTLE1BQVQsQ0FBZ0IsS0FBaEIsQ0FBc0IsR0FBdEIsQ0FBVDs7QUFFQSxpQkFBSyxJQUFJLElBQUUsQ0FBWCxFQUFjLElBQUUsR0FBRyxNQUFuQixFQUEyQixHQUEzQixFQUFnQzs7QUFFNUIsb0JBQUksSUFBSSxHQUFHLENBQUgsQ0FBUjtBQUNBLHVC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QUwsQ0FBcUIsU0FBckIsR0FBaUMsTUFBTSxjQUFjLE9BQWQsQ0FBc0IsQ0FBdEIsQ0FBdkM7O0FBRUEscUJBQUssS0FBTCxHQUFhLFdBQVcsYUFBeEI7O0FBRUEscUJBQUssWUFBTCxDQUFrQixTQUFsQixHQUE4QixNQUFNLEtBQUssS0FBTCxDQUFXLE9BQVgsQ0FBbUIsQ0FBbkIsQ0FBcEM7O0FBRUEscUJBQUssWUFBTCxDQUFrQixRQUFsQixHQUE2QixLQUE3QjtBQUNIO0FBQ0o7Ozs7Ozs7OztBQ2hMTDs7QUFFQSxJQUFJLGVBQWUsU0FBUyxjQUFULENBQXdCLDZCQUF4QixDQUFuQixDLENBTkE7Ozs7QUFRQSxJQUFJLE9BQU8sWUFBUCxJQUF1QixXQUEzQixFQUF3QztBQUNwQyxpQ0FBaUIsWUFBakI7QUFDSCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIENyZWF0ZWQgYnkgYnJ5Y2Ugb24gMi8xNi8xNy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgQ29va2llRmFjdG9yeSB7XG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yLCByZXF1aXJlcyBhIG5hbWVzcGFjZSBiZWluZyBwYXNzZWQgaW4gZm9yIHByZWZpeGluZyBhbGwgZGF0YVxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWVTcGFjZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWVTcGFjZSkge1xuICAgICAgICB0aGlzLm5hbWVTcGFjZSA9IG5hbWVTcGFjZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyBhIGNvb2tpZSB0byBwZXJzaXN0ZW50IHN0b3JhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBrZXkgb2YgdGhlIGNvb2tpZVxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgbmV3IHZhbHVlIG9mIHRoZSBjb29raWVcbiAgICAgKi9cbiAgICBzYXZlQ29va2llKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IHRoaXMubmFtZVNwYWNlICsgXCItXCIgKyBuYW1lICsgXCI9XCIgKyB2YWx1ZSArIFwiOyBwYXRoPS9cIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyBhIGpzb24gb2JqZWN0IGFzIGEgY29va2llXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUga2V5IGZvciB0aGUgY29va2llXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBqc29uIG9iamVjdCB0byBzYXZlXG4gICAgICovXG4gICAgc2F2ZUpTT04obmFtZSwgdmFsdWUpIHtcblxuICAgICAgICB0aGlzLnNhdmVDb29raWUobmFtZSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGNvb2tpZSBvdXQgb2YgdGhlIGRvY3VtZW50IGNvb2tpZSBsaXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29va2llIHdlIGFyZSBsb2FkaW5nXG4gICAgICogQHJldHVybnMgeyp9IHRoZSBuZXcgb2JqZWN0XG4gICAgICovXG4gICAgbG9hZENvb2tpZShuYW1lKSB7XG5cbiAgICAgICAgbmFtZSA9IHRoaXMubmFtZVNwYWNlICsgXCItXCIgKyBuYW1lICsgXCI9XCI7XG4gICAgICAgIGxldCBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxjYS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBsZXQgYyA9IGNhW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xuICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLGMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEganNvbiBvYmplY3QgZnJvbSBhIGNvb2tpZSwgb3IgcmV0dXJucyBhbiBlbXB0eSBKU09OXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUganNvbiB3ZSBhcmUgbG9hZGluZ1xuICAgICAqIEByZXR1cm5zIHt7fX0gVGhlIGZvdW5kIG9iamVjdFxuICAgICAqL1xuICAgIGxvYWRKU09OKG5hbWUpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmxvYWRDb29raWUobmFtZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG51bWJlciBmcm9tIGEgY29va2llXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgY29va2llIHdlIGFyZSBsb29raW5nIGZvclxuICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIGRlZmF1bHQgdG8gcmV0dXJuIGlmIHRoZSBjb29raWUgd2FzIG5vdCBmb3VuZFxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGxvYWROdW1iZXIobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5sb2FkQ29va2llKG5hbWUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcblxuICAgICAgICByZXR1cm4gTnVtYmVyKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGJvb2xlYW4gdmFsdWUgZnJvbSBhIGNvb2tpZVxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIGNvb2tpZSB3ZSBhcmUgbG9va2luZyBmb3JcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIEEgZGVmYXVsdCB0byByZXR1cm4gaWYgdGhlIHZhbHVlIHdhcyB1bmRlZmluZWRcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBsb2FkQm9vbGVhbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5sb2FkQ29va2llKG5hbWUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcblxuICAgICAgICByZXR1cm4gY29udGVudCA9PSAndHJ1ZSc7XG4gICAgfVxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBicnljZSBvbiAyLzgvMTcuXG4gKi9cblxuZXhwb3J0IGNsYXNzIFByb2R1Y3Qge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBhIHByb2R1Y3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9kdWN0Q29udGFpbmVyIFRoZSBjb250YWluZXIgdGhhdCB3aWxsIGhvbGQgYWxsIGRhdGEgZm9yIHRoaXMgcHJvZHVjdFxuICAgICAqIEBwYXJhbSBxdWFudGl0eUNoYW5nZWRDYWxsYmFja1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yIChwcm9kdWN0Q29udGFpbmVyLCBxdWFudGl0eUNoYW5nZWRDYWxsYmFjaykge1xuXG4gICAgICAgIHRoaXMucXVhbnRpdHlDaGFuZ2VkQ2FsbGJhY2sgPSBxdWFudGl0eUNoYW5nZWRDYWxsYmFjaztcblxuICAgICAgICB0aGlzLnNoaXBwaW5nT3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnF1YW50aXR5ID0gMDtcbiAgICAgICAgdGhpcy50b3RhbCA9IDA7XG5cbiAgICAgICAgdGhpcy5pZCA9IHByb2R1Y3RDb250YWluZXIuZGF0YXNldFsnaWQnXTtcbiAgICAgICAgdGhpcy5jb3N0ID0gcHJvZHVjdENvbnRhaW5lci5kYXRhc2V0Wydjb3N0J107XG4gICAgICAgIHRoaXMud2VpZ2h0ID0gcHJvZHVjdENvbnRhaW5lci5kYXRhc2V0Wyd3ZWlnaHQnXTtcblxuICAgICAgICBsZXQgc2hpcHBpbmdEaXZzID0gcHJvZHVjdENvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlYXN5X3Byb2R1Y3RzLXNoaXBwaW5nX29wdGlvbicpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHBpbmdEaXZzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGxldCBzaGlwcGluZ0RpdiA9IHNoaXBwaW5nRGl2c1tpXTtcblxuICAgICAgICAgICAgbGV0IHJlZ2lvbklkID0gc2hpcHBpbmdEaXYuZGF0YXNldFsncmVnaW9uX2lkJ107XG5cbiAgICAgICAgICAgIGxldCBrZXkgPSByZWdpb25JZCA/IHJlZ2lvbklkIDogJ2RlZmF1bHQnO1xuXG4gICAgICAgICAgICB0aGlzLnNoaXBwaW5nT3B0aW9uc1trZXldID0ge1xuICAgICAgICAgICAgICAgIHByaW1hcnlfcmF0ZTogTnVtYmVyKHNoaXBwaW5nRGl2LmRhdGFzZXRbJ3ByaW1hcnlfcmF0ZSddKSxcbiAgICAgICAgICAgICAgICBhZGRfb25fcmF0ZTogTnVtYmVyKHNoaXBwaW5nRGl2LmRhdGFzZXRbJ2FkZF9vbl9yYXRlJ10pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWFudGl0eUlucHV0ID0gcHJvZHVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZWFzeV9wcm9kdWN0cy1xdWFudGl0eV9pbnB1dCcpO1xuICAgICAgICB0aGlzLnRvdGFsRGlzcGxheSA9IHByb2R1Y3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmVhc3lfcHJvZHVjdHMtcHJvZHVjdF90b3RhbF9kaXNwbGF5Jyk7XG4gICAgICAgIHRoaXMucHJvZHVjdFRvdGFsID0gcHJvZHVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZWFzeV9wcm9kdWN0cy1wcm9kdWN0X3RvdGFsJyk7XG5cbiAgICAgICAgdGhpcy5xdWFudGl0eUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMucXVhbnRpdHlDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHF1YW50aXR5IGFuZCB1cGRhdGVzIHRoZSBjb3N0IHZhcmlhYmxlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHF1YW50aXR5XG4gICAgICovXG4gICAgc2V0UXVhbnRpdHkgKHF1YW50aXR5KSB7XG4gICAgICAgIHRoaXMucXVhbnRpdHkgPSBxdWFudGl0eTtcbiAgICAgICAgdGhpcy50b3RhbCA9IHF1YW50aXR5ICogdGhpcy5jb3N0O1xuXG4gICAgICAgIGlmICh0aGlzLnF1YW50aXR5ICE9IHRoaXMucXVhbnRpdHlJbnB1dC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5xdWFudGl0eUlucHV0LnZhbHVlID0gdGhpcy5xdWFudGl0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRvdGFsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9kdWN0VG90YWwuaW5uZXJIVE1MID0gdGhpcy50b3RhbC50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgdGhpcy50b3RhbERpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICcnXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gcXVhbnRpdHkgaGFzIGNoYW5nZWQgaW4gdGhlIGlucHV0LCBhbmQgd2lsbCByZWNhbGN1bGF0ZSB0aGUgdG90YWxzIGZvciB0aGlzIHByb2R1Y3RcbiAgICAgKi9cbiAgICBxdWFudGl0eUNoYW5nZWQgKCkge1xuXG4gICAgICAgIGxldCBxdWFudGl0eSA9IE51bWJlcih0aGlzLnF1YW50aXR5SW5wdXQudmFsdWUpO1xuXG4gICAgICAgIGlmIChpc05hTihxdWFudGl0eSkpIHtcbiAgICAgICAgICAgIHF1YW50aXR5ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0UXVhbnRpdHkocXVhbnRpdHkpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5xdWFudGl0eUNoYW5nZWRDYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnF1YW50aXR5Q2hhbmdlZENhbGxiYWNrKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0cmlldmVzIHRoZSBzaGlwcGluZyByYXRlIGZvciB0aGUgc3BlY2lmaWVkIHJlZ2lvblxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZ2lvbklkXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgcmV0cmlldmVTaGlwcGluZ1JhdGVzIChyZWdpb25JZCkge1xuICAgICAgICBsZXQgcmF0ZXMgPSB0aGlzLnNoaXBwaW5nT3B0aW9uc1tyZWdpb25JZF07XG5cbiAgICAgICAgcmV0dXJuIHJhdGVzID8gcmF0ZXMgOiB0aGlzLnNoaXBwaW5nT3B0aW9uc1snZGVmYXVsdCddO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGNvbXBhcmluZyB3ZWlnaHRzIG9mIHR3byBwcm9kdWN0c1xuICAgICAqXG4gICAgICogQHBhcmFtIGEgUHJvZHVjdFxuICAgICAqIEBwYXJhbSBiIFByb2R1Y3RcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXRpYyBjb21wYXJlV2VpZ2h0cyAoYSwgYikge1xuICAgICAgICBpZiAoYS53ZWlnaHQgPCBiLndlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhLndlaWdodCA+IGIud2VpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGJyeWNlIG9uIDIvMTYvMTcuXG4gKi9cblxuZXhwb3J0IGNsYXNzIFNoaXBwaW5nRmllbGQge1xuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdCBjb25zdHJ1Y3RvciBmb3IgYSBmaWVsZFxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkIEhUTUxOb2RlXG4gICAgICogQHBhcmFtIGNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGNvb2tpZUZhY3RvcnkgQ29va2llRmFjdG9yeVxuICAgICAqIEBwYXJhbSBjb29raWVLZXkgVGhlIGtleSBmb3IgdGhlIHN0b3JlZCBjb29raWVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciAoZmllbGQsIGNoYW5nZUNhbGxiYWNrLCBjb29raWVGYWN0b3J5LCBjb29raWVLZXkpIHtcblxuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMuY2hhbmdlQ2FsbGJhY2sgPSBjaGFuZ2VDYWxsYmFjaztcbiAgICAgICAgdGhpcy5jb29raWVGYWN0b3J5ID0gY29va2llRmFjdG9yeTtcbiAgICAgICAgdGhpcy5jb29raWVLZXkgPSBjb29raWVLZXk7XG5cbiAgICAgICAgdGhpcy52YWx1ZUVudGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXF1aXJlZCA9IHRoaXMuZmllbGQuaGFzQXR0cmlidXRlKCdyZXF1aXJlZCcpO1xuXG4gICAgICAgIHRoaXMuYmxhbmtWYWx1ZSA9IHRoaXMuZmllbGQuZGF0YXNldFsnYmxhbmtfdmFsdWUnXTtcblxuICAgICAgICBsZXQgc3RvcmVkVmFsdWUgPSB0aGlzLmNvb2tpZUZhY3RvcnkubG9hZENvb2tpZSh0aGlzLmNvb2tpZUtleSk7XG5cbiAgICAgICAgaWYgKHN0b3JlZFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLnZhbHVlID0gc3RvcmVkVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmNoZWNrSW5wdXRWYWx1ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maWVsZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnZlcmlmeUlucHV0VmFsdWUuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgdXNlciBoYXMgZW50ZXJlZCBhIHByb3BlciB2YWx1ZVxuICAgICAqL1xuICAgIGNoZWNrSW5wdXRWYWx1ZSAoKSB7XG5cbiAgICAgICAgdGhpcy52YWx1ZUVudGVyZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5maWVsZC52YWx1ZSkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5ibGFua1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUVudGVyZWQgPSB0aGlzLmJsYW5rVmFsdWUgIT0gdGhpcy5maWVsZC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVFbnRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRvdWJsZSBjaGVja3MgaW5wdXQgdmFsdWUgd2hlbiBpdCBjaGFuZ2VzIHRvIHZlcmlmeSBhIHZhbHVlIHdhcyBlbnRlcmVkIHByb3Blcmx5XG4gICAgICovXG4gICAgdmVyaWZ5SW5wdXRWYWx1ZSAoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbHVlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmFsdWVFbnRlcmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvb2tpZUZhY3Rvcnkuc2F2ZUNvb2tpZSh0aGlzLmNvb2tpZUtleSwgdGhpcy5maWVsZC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBmaWVsZCBpcyByZWFkeSBmb3Igc3VibWlzc2lvblxuICAgICAqXG4gICAgICogQHJldHVybnMgQm9vbGVhblxuICAgICAqL1xuICAgIGNoZWNrSWZDb21wbGV0ZSAoKSB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZWQgPyB0aGlzLnZhbHVlRW50ZXJlZCA6IHRydWU7XG4gICAgfVxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBicnljZSBvbiAyLzE2LzE3LlxuICovXG5cbmltcG9ydCB7U2hpcHBpbmdGaWVsZH0gZnJvbSAnLi9TaGlwcGluZ0ZpZWxkJztcblxuZXhwb3J0IGNsYXNzIFNoaXBwaW5nTWFuYWdlciB7XG5cbiAgICAvKipcbiAgICAgKiBNYW5hZ2VzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBzaGlwcGluZyBvcHRpb25zXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9ybVxuICAgICAqIEBwYXJhbSBhZGRyZXNzQ2hhbmdlQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gY29va2llRmFjdG9yeSBDb29raWVGYWN0b3J5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IgKGZvcm0sIGFkZHJlc3NDaGFuZ2VDYWxsYmFjaywgY29va2llRmFjdG9yeSkge1xuXG4gICAgICAgIFNoaXBwaW5nTWFuYWdlci5OQU1FX0NPT0tJRSA9IFwibmFtZVwiO1xuICAgICAgICBTaGlwcGluZ01hbmFnZXIuQUREUkVTU18xX0NPT0tJRSA9IFwiYWRkcmVzc18xXCI7XG4gICAgICAgIFNoaXBwaW5nTWFuYWdlci5BRERSRVNTXzJfQ09PS0lFID0gXCJhZGRyZXNzXzJcIjtcbiAgICAgICAgU2hpcHBpbmdNYW5hZ2VyLkNJVFlfQ09PS0lFID0gXCJjaXR5XCI7XG4gICAgICAgIFNoaXBwaW5nTWFuYWdlci5QT1NUQUxfQ09ERV9DT09LSUUgPSBcInBvc3RhbF9jb2RlXCI7XG4gICAgICAgIFNoaXBwaW5nTWFuYWdlci5TVEFURV9DT09LSUUgPSBcInN0YXRlXCI7XG4gICAgICAgIFNoaXBwaW5nTWFuYWdlci5DT1VOVFJZX0NPT0tJRSA9IFwiY291bnRyeVwiO1xuXG4gICAgICAgIGxldCBuYW1lSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZWFzeV9wcm9kdWN0cy1uYW1lXCIpO1xuICAgICAgICBsZXQgYWRkcmVzczFJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIiNlYXN5X3Byb2R1Y3RzLWFkZHJlc3NfMVwiKTtcbiAgICAgICAgbGV0IGFkZHJlc3MySW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZWFzeV9wcm9kdWN0cy1hZGRyZXNzXzJcIik7XG4gICAgICAgIGxldCBjaXR5SW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZWFzeV9wcm9kdWN0cy1jaXR5XCIpO1xuICAgICAgICBsZXQgcG9zdGFsQ29kZUlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Vhc3lfcHJvZHVjdHMtcG9zdGFsX2NvZGVcIik7XG4gICAgICAgIGxldCBzdGF0ZUlucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Vhc3lfcHJvZHVjdHMtc3RhdGVcIik7XG4gICAgICAgIGxldCBjb3VudHJ5U2VsZWN0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Vhc3lfcHJvZHVjdHMtY291bnRyeVwiKTtcblxuICAgICAgICB0aGlzLm5hbWVGaWVsZCA9IG5ldyBTaGlwcGluZ0ZpZWxkKG5hbWVJbnB1dCwgYWRkcmVzc0NoYW5nZUNhbGxiYWNrLCBjb29raWVGYWN0b3J5LCBTaGlwcGluZ01hbmFnZXIuTkFNRV9DT09LSUUpO1xuICAgICAgICB0aGlzLmFkZHJlc3MxRmllbGQgPSBuZXcgU2hpcHBpbmdGaWVsZChhZGRyZXNzMUlucHV0LCBhZGRyZXNzQ2hhbmdlQ2FsbGJhY2ssIGNvb2tpZUZhY3RvcnksIFNoaXBwaW5nTWFuYWdlci5BRERSRVNTXzFfQ09PS0lFKTtcbiAgICAgICAgdGhpcy5hZGRyZXNzMkZpZWxkID0gbmV3IFNoaXBwaW5nRmllbGQoYWRkcmVzczJJbnB1dCwgYWRkcmVzc0NoYW5nZUNhbGxiYWNrLCBjb29raWVGYWN0b3J5LCBTaGlwcGluZ01hbmFnZXIuQUREUkVTU18yX0NPT0tJRSk7XG4gICAgICAgIHRoaXMuY2l0eUZpZWxkID0gbmV3IFNoaXBwaW5nRmllbGQoY2l0eUlucHV0LCBhZGRyZXNzQ2hhbmdlQ2FsbGJhY2ssIGNvb2tpZUZhY3RvcnksIFNoaXBwaW5nTWFuYWdlci5DSVRZX0NPT0tJRSk7XG4gICAgICAgIHRoaXMucG9zdGFsQ29kZUZpZWxkID0gbmV3IFNoaXBwaW5nRmllbGQocG9zdGFsQ29kZUlucHV0LCBhZGRyZXNzQ2hhbmdlQ2FsbGJhY2ssIGNvb2tpZUZhY3RvcnksIFNoaXBwaW5nTWFuYWdlci5QT1NUQUxfQ09ERV9DT09LSUUpO1xuICAgICAgICB0aGlzLnN0YXRlRmllbGQgPSBuZXcgU2hpcHBpbmdGaWVsZChzdGF0ZUlucHV0LCBhZGRyZXNzQ2hhbmdlQ2FsbGJhY2ssIGNvb2tpZUZhY3RvcnksIFNoaXBwaW5nTWFuYWdlci5TVEFURV9DT09LSUUpO1xuICAgICAgICB0aGlzLmNvdW50cnlGaWVsZCA9IG5ldyBTaGlwcGluZ0ZpZWxkKGNvdW50cnlTZWxlY3QsIGFkZHJlc3NDaGFuZ2VDYWxsYmFjaywgY29va2llRmFjdG9yeSwgU2hpcHBpbmdNYW5hZ2VyLkNPVU5UUllfQ09PS0lFKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgYWxsIGZpZWxkcyB0byBzZWUgaWYgdGhlIHNoaXBwaW5nIGlzIHJlYWR5IHRvIGdvXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjaGVja0lmU2hpcHBpbmdDb21wbGV0ZSgpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lRmllbGQuY2hlY2tJZkNvbXBsZXRlKCkgJiYgdGhpcy5hZGRyZXNzMUZpZWxkLmNoZWNrSWZDb21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5hZGRyZXNzMkZpZWxkLmNoZWNrSWZDb21wbGV0ZSgpICYmIHRoaXMuY2l0eUZpZWxkLmNoZWNrSWZDb21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5wb3N0YWxDb2RlRmllbGQuY2hlY2tJZkNvbXBsZXRlKCkgJiYgdGhpcy5zdGF0ZUZpZWxkLmNoZWNrSWZDb21wbGV0ZSgpXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5jb3VudHJ5RmllbGQuY2hlY2tJZkNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnVuZGxlcyB0aGUgZW50aXJlIGFkZHJlc3MgY29tcG9uZW50IGludG8gYSBKU09OXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7e25hbWU6ICosIGFkZHJlc3NMaW5lMTogKiwgYWRkcmVzc0xpbmUyOiAqLCBjaXR5OiAqLCBwb3N0YWxDb2RlOiAqLCBjb3VudHJ5OiB7aWQ6ICosIG5hbWU6ICp9fX1cbiAgICAgKi9cbiAgICBidW5kbGVBZGRyZXNzICgpIHtcblxuICAgICAgICBsZXQgc2VsZWN0ZWRPcHRpb24gPSB0aGlzLmNvdW50cnlGaWVsZC5maWVsZC5vcHRpb25zW3RoaXMuY291bnRyeUZpZWxkLmZpZWxkLnNlbGVjdGVkSW5kZXhdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVGaWVsZC5maWVsZC52YWx1ZSxcbiAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogdGhpcy5hZGRyZXNzMUZpZWxkLmZpZWxkLnZhbHVlLFxuICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiB0aGlzLmFkZHJlc3MyRmllbGQuZmllbGQudmFsdWUsXG4gICAgICAgICAgICBjaXR5OiB0aGlzLmNpdHlGaWVsZC5maWVsZC52YWx1ZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHRoaXMucG9zdGFsQ29kZUZpZWxkLmZpZWxkLnZhbHVlLFxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGVGaWVsZC5maWVsZC52YWx1ZSxcbiAgICAgICAgICAgIGNvdW50cnk6IHtcbiAgICAgICAgICAgICAgICBpZDogc2VsZWN0ZWRPcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAgbmFtZTogc2VsZWN0ZWRPcHRpb24udGV4dFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc2VsZWN0ZWQgcmVnaW9uIGlkIG9yIHVuZGVmaW5lZCBpZiBub25lIGhhcyBiZWVuIGZvdW5kXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBCb29sZWFufHVuZGVmaW5lZFxuICAgICAqL1xuICAgIGdldFJlZ2lvbklkICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnRyeUZpZWxkLmNoZWNrSWZDb21wbGV0ZSgpID8gdGhpcy5jb3VudHJ5RmllbGQuZmllbGQudmFsdWUgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBicnljZSBvbiAyLzgvMTcuXG4gKi9cblxuaW1wb3J0IHtQcm9kdWN0fSBmcm9tICcuL1Byb2R1Y3QnO1xuaW1wb3J0IHtDb29raWVGYWN0b3J5fSBmcm9tICcuL0Nvb2tpZUZhY3RvcnknO1xuaW1wb3J0IHtTaGlwcGluZ01hbmFnZXJ9IGZyb20gJy4vU2hpcHBpbmdNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFNob3BwaW5nQ2FydCB7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhpcyBzaG9wcGluZyBjYXJ0IGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvZHVjdHNGb3JtIHRoZSBkb20gZm9ybVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yIChwcm9kdWN0c0Zvcm0pIHtcbiAgICAgICAgU2hvcHBpbmdDYXJ0LlBST0RVQ1RTX0NPT0tJRSA9ICdwcm9kdWN0X3F1YW50aXRpZXMnO1xuXG4gICAgICAgIHRoaXMucHJvZHVjdHNGb3JtID0gcHJvZHVjdHNGb3JtO1xuXG4gICAgICAgIHRoaXMuc3VidG90YWxEaXNwbGF5ID0gdGhpcy5wcm9kdWN0c0Zvcm0ucXVlcnlTZWxlY3RvcignI2Vhc3lfcHJvZHVjdHMtc3VidG90YWwnKTtcbiAgICAgICAgdGhpcy5zaGlwcGluZ0Rpc3BsYXkgPSB0aGlzLnByb2R1Y3RzRm9ybS5xdWVyeVNlbGVjdG9yKCcjZWFzeV9wcm9kdWN0cy1zaGlwcGluZ190b3RhbCcpO1xuICAgICAgICB0aGlzLnRvdGFsRGlzcGxheSA9IHRoaXMucHJvZHVjdHNGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNlYXN5X3Byb2R1Y3RzLXRvdGFsJyk7XG5cbiAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLnByb2R1Y3RzRm9ybS5xdWVyeVNlbGVjdG9yKCcjZWFzeV9wcm9kdWN0cy1zdWJtaXQnKTtcblxuICAgICAgICB0aGlzLmNvb2tpZUZhY3RvcnkgPSBuZXcgQ29va2llRmFjdG9yeSgnZWFzeV9wcm9kdWN0cycpO1xuXG4gICAgICAgIHRoaXMucHJvZHVjdFF1YW50aXRpZXMgPSB0aGlzLmNvb2tpZUZhY3RvcnkubG9hZEpTT04oU2hvcHBpbmdDYXJ0LlBST0RVQ1RTX0NPT0tJRSk7XG4gICAgICAgIGxldCB1bnNvcnRlZFByb2R1Y3RzID0gW107XG5cbiAgICAgICAgbGV0IHByb2R1Y3RDb250YWluZXJzID0gdGhpcy5wcm9kdWN0c0Zvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZWFzeV9wcm9kdWN0cy1wcm9kdWN0Jyk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9kdWN0Q29udGFpbmVycy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHByb2R1Y3RDb250YWluZXJzW2ldLCB0aGlzLnF1YW50aXR5Q2hhbmdlZC5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgbGV0IHN0b3JlZFF1YW50aXR5ID0gdGhpcy5wcm9kdWN0UXVhbnRpdGllc1twcm9kdWN0LmlkXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZWRRdWFudGl0eSAhPSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHN0b3JlZFF1YW50aXR5ID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJvZHVjdC5zZXRRdWFudGl0eShzdG9yZWRRdWFudGl0eSk7XG5cbiAgICAgICAgICAgIHVuc29ydGVkUHJvZHVjdHMucHVzaChwcm9kdWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvZHVjdHMgPSB1bnNvcnRlZFByb2R1Y3RzLnNvcnQoUHJvZHVjdC5jb21wYXJlV2VpZ2h0cykucmV2ZXJzZSgpO1xuXG4gICAgICAgIHRoaXMuc2hpcHBpbmdNYW5hZ2VyID0gbmV3IFNoaXBwaW5nTWFuYWdlcih0aGlzLnByb2R1Y3RzRm9ybSwgdGhpcy5jaGVja1NoaXBwaW5nQWRkcmVzcy5iaW5kKHRoaXMpLCB0aGlzLmNvb2tpZUZhY3RvcnkpO1xuXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxzKCk7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiKSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwU3VibWl0Q2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnNldHVwU3VibWl0Q2FsbGJhY2suYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIGNvbXBsZXRlIGNhbGxiYWNrXG4gICAgICovXG4gICAgc2V0dXBTdWJtaXRDYWxsYmFjayAoKSB7XG5cbiAgICAgICAgbGV0IHN1Ym1pdENhbGxiYWNrTmFtZSA9IHRoaXMucHJvZHVjdHNGb3JtLmRhdGFzZXRbJ3N1Ym1pdF9jYWxsYmFjayddO1xuXG4gICAgICAgIGlmIChzdWJtaXRDYWxsYmFja05hbWUpIHtcbiAgICAgICAgICAgIGxldCBzdWJtaXRDYWxsYmFjayA9IGV2YWwoc3VibWl0Q2FsbGJhY2tOYW1lKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJtaXRDYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcm9kdWN0c0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRGb3JtLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBzdWJtaXNzaW9uIGlmIGEgY29tcGxldGUgY2FsbGJhY2sgaXMgc2V0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBzdWJtaXRGb3JtIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5zdWJtaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgbGV0IHByb2R1Y3REYXRhID0gW107XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgbGV0IHByb2R1Y3QgPSB0aGlzLnByb2R1Y3RzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QucXVhbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdERhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0LnF1YW50aXR5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zdWJtaXRDYWxsYmFjayh0aGlzLnRvdGFsLCBwcm9kdWN0RGF0YSwgdGhpcy5zaGlwcGluZ01hbmFnZXIuYnVuZGxlQWRkcmVzcygpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoZWNrcyB0byBzZWUgaWYgdGhlIHNoaXBwaW5nIGFkZHJlc3MgaGFzIGJlZW4gY2hhbmdlZFxuICAgICAqL1xuICAgIGNoZWNrU2hpcHBpbmdBZGRyZXNzICgpIHtcblxuICAgICAgICBpZiAodGhpcy5zaGlwcGluZ01hbmFnZXIuY2hlY2tJZlNoaXBwaW5nQ29tcGxldGUoKSkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbHMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hpcHBpbmdEaXNwbGF5LmlubmVySFRNTCA9ICdQbGVhc2UgRW50ZXIgWW91ciBTaGlwcGluZyBBZGRyZXNzJztcbiAgICAgICAgICAgIHRoaXMudG90YWxEaXNwbGF5LmlubmVySFRNTCA9ICdQbGVhc2UgRW50ZXIgWW91ciBTaGlwcGluZyBBZGRyZXNzJztcblxuICAgICAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW5ldmVyIGEgcXVhbnRpdHkgaGFzIGNoYW5nZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9kdWN0IFByb2R1Y3RcbiAgICAgKi9cbiAgICBxdWFudGl0eUNoYW5nZWQgKHByb2R1Y3QpIHtcbiAgICAgICAgdGhpcy5wcm9kdWN0UXVhbnRpdGllc1twcm9kdWN0LmlkXSA9IHByb2R1Y3QucXVhbnRpdHk7XG4gICAgICAgIHRoaXMuY29va2llRmFjdG9yeS5zYXZlSlNPTihTaG9wcGluZ0NhcnQuUFJPRFVDVFNfQ09PS0lFLCB0aGlzLnByb2R1Y3RRdWFudGl0aWVzKTtcblxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVRvdGFscygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyBhbGwgdG90YWxzXG4gICAgICovXG4gICAgY2FsY3VsYXRlVG90YWxzICgpIHtcblxuICAgICAgICBsZXQgc3VidG90YWwgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN1YnRvdGFsKz0gdGhpcy5wcm9kdWN0c1tpXS50b3RhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3VidG90YWxEaXNwbGF5LmlubmVySFRNTCA9ICckJyArIHN1YnRvdGFsLnRvRml4ZWQoMik7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hpcHBpbmdNYW5hZ2VyLmNoZWNrSWZTaGlwcGluZ0NvbXBsZXRlKCkpIHtcblxuICAgICAgICAgICAgbGV0IHNoaXBwaW5nVG90YWwgPSAwO1xuICAgICAgICAgICAgbGV0IHJlZ2lvbklkID0gdGhpcy5zaGlwcGluZ01hbmFnZXIuZ2V0UmVnaW9uSWQoKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHByb2R1Y3QgPSB0aGlzLnByb2R1Y3RzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QucXVhbnRpdHkpIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgc2hpcHBpbmdSYXRlcyA9IHByb2R1Y3QucmV0cmlldmVTaGlwcGluZ1JhdGVzKHJlZ2lvbklkKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgYWRkT25RdWFudGl0eSA9IHByb2R1Y3QucXVhbnRpdHk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBwaW5nVG90YWwgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdUb3RhbCs9IHNoaXBwaW5nUmF0ZXMucHJpbWFyeV9yYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkT25RdWFudGl0eS0tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRPblF1YW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwcGluZ1RvdGFsKz0gc2hpcHBpbmdSYXRlcy5hZGRfb25fcmF0ZSAqIGFkZE9uUXVhbnRpdHk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2hpcHBpbmdEaXNwbGF5LmlubmVySFRNTCA9ICckJyArIHNoaXBwaW5nVG90YWwudG9GaXhlZCgyKTtcblxuICAgICAgICAgICAgdGhpcy50b3RhbCA9IHN1YnRvdGFsICsgc2hpcHBpbmdUb3RhbDtcblxuICAgICAgICAgICAgdGhpcy50b3RhbERpc3BsYXkuaW5uZXJIVE1MID0gJyQnICsgdGhpcy50b3RhbC50b0ZpeGVkKDIpO1xuXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBicnljZSBvbiAyLzgvMTcuXG4gKi9cblxuaW1wb3J0IHtTaG9wcGluZ0NhcnR9IGZyb20gJy4vY2xhc3Nlcy9TaG9wcGluZ0NhcnQnO1xuXG5sZXQgcHJvZHVjdHNGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vhc3lfcHJvZHVjdHMtcHJvZHVjdHNfbGlzdCcpO1xuXG5pZiAodHlwZW9mIHByb2R1Y3RzRm9ybSAhPSAndW5kZWZpbmVkJykge1xuICAgIG5ldyBTaG9wcGluZ0NhcnQocHJvZHVjdHNGb3JtKTtcbn0iXX0="}